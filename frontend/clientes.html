<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clientes - AbsenteismoController</title>
    
    <!-- Styles -->
    <link rel="stylesheet" href="/static/css/main.css">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    
    <!-- Sistema de Cores por Cliente -->
    <script src="/static/js/cores-cliente.js"></script>
    
    <style>
        .clientes-page {
            display: flex;
            flex-direction: column;
            gap: 32px;
        }
        
        .clientes-hero {
            background: linear-gradient(135deg, #1a237e, #3949ab);
            border-radius: 28px;
            padding: 36px;
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 24px;
            flex-wrap: wrap;
            box-shadow: 0 24px 60px rgba(26, 35, 126, 0.28);
        }

        .clientes-hero-info {
            display: flex;
            flex-direction: column;
            gap: 8px;
            max-width: 520px;
        }
        
        .clientes-hero h1 {
            margin: 0;
            font-size: 32px;
            font-weight: 700;
            letter-spacing: 0.8px;
        }
        
        .clientes-hero p {
            margin: 8px 0 0;
            font-size: 16px;
            max-width: 520px;
            opacity: 0.9;
            line-height: 1.6;
        }
        
        .btn-hero {
            background: #2e7d32;
            color: #fff;
            padding: 14px 28px;
            border-radius: 999px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            font-size: 15px;
            letter-spacing: 0.04em;
            box-shadow: 0 8px 20px rgba(46, 125, 50, 0.35);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        
        .btn-hero:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 24px rgba(46, 125, 50, 0.45);
        }
        
        .clientes-snapshot {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 18px;
        }
        
        .snapshot-card {
            position: relative;
            background: var(--surface);
            border-radius: 20px;
            padding: 20px 24px;
            box-shadow: 0 18px 38px rgba(26, 35, 126, 0.08);
            display: flex;
            flex-direction: column;
            gap: 10px;
            overflow: hidden;
            min-height: 140px;
        }
        
        .snapshot-card::after {
            content: "";
            position: absolute;
            top: -48px;
            right: -48px;
            width: 140px;
            height: 140px;
            background: rgba(26, 35, 126, 0.08);
            border-radius: 50%;
        }
        
        .snapshot-card .label {
            font-size: 13px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: rgba(26, 35, 126, 0.75);
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .snapshot-card .label i {
            font-size: 14px;
        }
        
        .snapshot-card .value {
            font-size: 34px;
            font-weight: 700;
            color: #1a237e;
        }
        
        .snapshot-card .detail {
            font-size: 14px;
            color: #5f6368;
            line-height: 1.4;
            max-width: 90%;
        }
        
        .snapshot-card.loading {
            align-items: center;
            justify-content: center;
            text-align: center;
            color: #5f6368;
        }
        
        .snapshot-card.loading i {
            font-size: 24px;
            margin-bottom: 10px;
        }
        
        .clientes-filters {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            align-items: center;
        }
        
        .filter-chip {
            background: rgba(26, 35, 126, 0.08);
            border: none;
            border-radius: 999px;
            padding: 8px 20px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            font-weight: 600;
            letter-spacing: 0.03em;
            color: #1a237e;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .filter-chip i {
            font-size: 13px;
        }
        
        .filter-chip:hover {
            transform: translateY(-1px);
            box-shadow: 0 6px 16px rgba(26, 35, 126, 0.16);
            background: rgba(26, 35, 126, 0.12);
        }
        
        .filter-chip.active {
            background: #1a237e;
            color: #fff;
            box-shadow: 0 10px 22px rgba(26, 35, 126, 0.35);
        }
        
        .filter-chip.active:hover {
            background: #202f97;
        }
        
        .clientes-secondary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 24px;
            align-items: start;
        }
        
        .clientes-alerts,
        .clientes-highlights,
        .clientes-help {
            background: var(--surface);
            border-radius: 22px;
            box-shadow: 0 20px 40px rgba(26, 35, 126, 0.12);
            padding: 26px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        
        .clientes-alerts h3,
        .clientes-highlights h3,
        .clientes-help h3 {
            margin: 0;
            font-size: 18px;
            font-weight: 700;
            color: #1a237e;
            display: flex;
            align-items: center;
            gap: 10px;
            letter-spacing: 0.04em;
        }
        
        .clientes-empty-sm {
            text-align: center;
            padding: 24px 12px;
            color: #5f6368;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            font-size: 14px;
        }
        
        .clientes-empty-sm i {
            font-size: 20px;
            opacity: 0.7;
        }
        
        .alert-list {
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            gap: 14px;
        }
        
        .alert-item {
            display: flex;
            gap: 14px;
            padding: 14px 16px;
            border-radius: 18px;
            background: #f6f7fb;
            border-left: 4px solid #c5cae9;
            align-items: flex-start;
        }
        
        .alert-icon {
            width: 38px;
            height: 38px;
            border-radius: 12px;
            background: rgba(26, 35, 126, 0.12);
            color: #1a237e;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }
        
        .alert-content {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }
        
        .alert-title {
            font-size: 14px;
            font-weight: 600;
            color: #1a237e;
        }
        
        .alert-message {
            font-size: 13px;
            color: #424242;
            line-height: 1.4;
        }
        
        .alert-item.severity-alta {
            border-left-color: #d32f2f;
            background: rgba(211, 47, 47, 0.08);
        }
        
        .alert-item.severity-alta .alert-icon {
            background: rgba(211, 47, 47, 0.12);
            color: #d32f2f;
        }
        
        .alert-item.severity-media {
            border-left-color: #f9a825;
            background: rgba(249, 168, 37, 0.10);
        }
        
        .alert-item.severity-media .alert-icon {
            background: rgba(249, 168, 37, 0.16);
            color: #f57f17;
        }
        
        .alert-item.severity-baixa {
            border-left-color: #4caf50;
            background: rgba(76, 175, 80, 0.08);
        }
        
        .alert-item.severity-baixa .alert-icon {
            background: rgba(76, 175, 80, 0.16);
            color: #2e7d32;
        }
        
        .alert-actions {
            display: flex;
            justify-content: flex-end;
        }
        
        .highlights-list {
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            gap: 14px;
        }
        
        .highlights-list li {
            background: #f6f7fb;
            border-radius: 18px;
            padding: 14px 18px;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        
        .highlight-title {
            font-size: 15px;
            font-weight: 600;
            color: #1a237e;
        }
        
        .highlight-desc {
            font-size: 13px;
            color: #4f4f4f;
            line-height: 1.4;
        }
        
        .clientes-help ul {
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .clientes-help a {
            color: #1a237e;
            text-decoration: none;
            font-weight: 600;
            letter-spacing: 0.02em;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 10px 12px;
            border-radius: 12px;
            transition: background 0.2s ease;
        }
        
        .clientes-help a:hover {
            background: rgba(26, 35, 126, 0.08);
        }
        
        .clientes-help i {
            color: #3949ab;
        }
        
        .clientes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 16px;
        }
        
        .cliente-card {
            background: var(--surface);
            border-radius: 12px;
            box-shadow: var(--shadow-md);
            border: 1px solid transparent;
            padding: 14px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
            min-height: 0;
        }
        
        .cliente-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }
        
        .cliente-card.selected {
            border-color: var(--cliente-cor, var(--primary));
            box-shadow: 0 16px 32px rgba(26, 35, 126, 0.22);
        }
        
        .cliente-card-header {
            display: flex;
            justify-content: space-between;
            gap: 12px;
            align-items: stretch;
        }
        
        .cliente-card-identidade {
            display: flex;
            align-items: center;
            gap: 12px;
            min-width: 0;
        }
        
        .cliente-card-logo {
            width: 56px;
            height: 56px;
            border-radius: 16px;
            background: var(--cliente-banner, linear-gradient(135deg, #1a237e, #3949ab));
            color: #fff;
            font-weight: 700;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 12px 26px rgba(26, 35, 126, 0.25);
            flex-shrink: 0;
        }
        
        .cliente-card-logo.has-image {
            background: #fff;
            border: 1px solid rgba(26, 35, 126, 0.12);
            box-shadow: 0 8px 18px rgba(26, 35, 126, 0.15);
        }
        
        .cliente-card-logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: inherit;
        }
        
        .cliente-card-logo span {
            font-weight: 700;
            font-size: 16px;
        }
        
        .cliente-card-titulos {
            display: flex;
            flex-direction: column;
            gap: 2px;
            min-width: 0;
        }
        
        .cliente-card-titulos h3 {
            margin: 0;
            font-size: 16px;
            font-weight: 700;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .cliente-card-titulos span {
            font-size: 11px;
            color: var(--text-secondary);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .cliente-card-highlights {
            display: flex;
            flex-direction: column;
            gap: 8px;
            align-items: flex-end;
            justify-content: flex-start;
        }
        
        .cliente-card-highlight {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            background: rgba(26, 35, 126, 0.06);
            padding: 8px 10px;
            border-radius: 10px;
            min-width: 110px;
            box-shadow: 0 8px 18px rgba(26, 35, 126, 0.12);
        }
        
        .cliente-card-highlight .label {
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-secondary);
        }
        
        .cliente-card-highlight .value {
            font-size: 13px;
            font-weight: 600;
            color: var(--text-primary);
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }
        
        .cliente-card-highlight .value i {
            color: var(--cliente-cor, var(--primary));
        }
        
        .cliente-card-body {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .cliente-status-chip {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border-radius: 999px;
            font-size: 11px;
            font-weight: 600;
            background: rgba(26, 35, 126, 0.08);
            color: var(--cliente-cor, var(--primary));
            letter-spacing: 0.05em;
            text-transform: uppercase;
            width: fit-content;
            border: 1px solid transparent;
        }
        
        .cliente-status-chip.status-active {
            background: rgba(76, 175, 80, 0.15);
            color: #2e7d32;
            border-color: rgba(76, 175, 80, 0.3);
        }
        
        .cliente-status-chip.status-archive {
            background: rgba(255, 193, 7, 0.25);
            color: #f57c00;
            border-color: rgba(255, 193, 7, 0.5);
            font-weight: 700;
        }
        
        .cliente-status-chip.status-empty {
            background: rgba(158, 158, 158, 0.15);
            color: #616161;
            border-color: rgba(158, 158, 158, 0.3);
        }
        
        .cliente-meta-grid {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 8px 12px;
        }
        
        .cliente-meta-item {
            display: flex;
            flex-direction: column;
            gap: 2px;
            min-width: 0;
        }
        
        .cliente-meta-item span {
            font-size: 10px;
            letter-spacing: 0.05em;
            text-transform: uppercase;
            color: var(--text-secondary);
        }
        
        .cliente-meta-item strong {
            font-size: 12px;
            color: var(--text-primary);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .cliente-meta-item.situacao-item {
            padding: 8px;
            border-radius: 8px;
            background: rgba(26, 35, 126, 0.04);
            border-left: 3px solid rgba(26, 35, 126, 0.2);
        }
        
        .cliente-meta-item.situacao-item[data-situacao*="ativo"],
        .cliente-meta-item.situacao-item[data-situacao*="ativa"] {
            background: rgba(76, 175, 80, 0.08);
            border-left-color: #4caf50;
        }
        
        .cliente-meta-item.situacao-item[data-situacao*="arquivo"] {
            background: rgba(255, 193, 7, 0.15);
            border-left-color: #ffc107;
        }
        
        .cliente-meta-item.situacao-item[data-situacao*="arquivo"] strong {
            color: #f57c00;
            font-weight: 700;
        }
        
        .cliente-meta-item.situacao-item[data-situacao*="baixada"],
        .cliente-meta-item.situacao-item[data-situacao*="inativa"] {
            background: rgba(158, 158, 158, 0.08);
            border-left-color: #9e9e9e;
        }
        
        .cliente-card-actions {
            margin-top: auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 8px;
        }
        
        .cliente-card-actions-left {
            display: flex;
            gap: 6px;
        }
        
        .btn-card {
            border: none;
            border-radius: 8px;
            padding: 6px 10px;
            font-size: 11px;
            font-weight: 600;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        
        .btn-card-primary,
        .btn-select,
        .btn-card-enter {
            background: var(--cliente-cor, var(--primary));
            color: #fff;
            box-shadow: 0 6px 12px rgba(26, 35, 126, 0.18);
        }
        
        .btn-card-primary:hover,
        .btn-select:hover,
        .btn-card-enter:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(26, 35, 126, 0.25);
        }
        
        .btn-card-secondary {
            background: var(--surface);
            color: var(--text-secondary);
            border: 1px solid var(--border);
        }
        
        .btn-card-secondary:hover {
            transform: translateY(-2px);
        }
        
        .btn-card-info {
            background: #ff9800;
            color: #fff;
            box-shadow: 0 4px 8px rgba(255, 152, 0, 0.25);
        }
        
        .btn-card-info:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(255, 152, 0, 0.35);
            background: #f57c00;
        }
        
        .btn-card-danger {
            background: #dc3545;
            color: #fff;
            box-shadow: 0 4px 8px rgba(220, 53, 69, 0.25);
        }
        
        .btn-card-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(220, 53, 69, 0.35);
            background: #c82333;
        }
        
        .clientes-empty {
            background: var(--surface);
            border-radius: 20px;
            padding: 60px 20px;
            text-align: center;
            color: var(--text-secondary);
            box-shadow: var(--shadow-sm);
        }
        
        .clientes-manage {
            background: var(--surface);
            border-radius: 20px;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--border);
            overflow: hidden;
        }
        
        .clientes-manage-header {
            padding: 20px 24px;
            border-bottom: 1px solid var(--divider);
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
        }
        
        .clientes-manage-header h2 {
            margin: 0;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .clientes-table table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .clientes-table th {
            background: var(--primary);
            color: white;
            padding: 16px;
            text-align: left;
            font-weight: 600;
            font-size: 14px;
        }
        
        .clientes-table td {
            padding: 14px 16px;
            border-bottom: 1px solid var(--border);
            font-size: 14px;
        }
        
        .clientes-table tr:last-child td {
            border-bottom: none;
        }
        
        .clientes-table tr.selected-row {
            background: rgba(26, 35, 126, 0.08);
        }
        
        .clientes-table tr:hover {
            background: var(--surface-hover);
        }
        
        .acoes-cell {
            display: flex;
            gap: 8px;
        }
        
        .btn-icon-small {
            padding: 6px 10px;
            font-size: 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            transition: all 0.2s;
        }
        
        .btn-icon-small:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .btn-edit {
            background: var(--primary-light);
            color: white;
        }
        
        .btn-edit:hover {
            background: var(--primary);
        }
        
        .btn-delete {
            background: #dc3545;
            color: white;
        }
        
        .btn-delete:hover {
            background: #b71c1c;
        }
        
        .btn-sm {
            padding: 6px 10px;
            font-size: 12px;
            border-radius: 10px;
        }

        .btn-archive {
            background: #ffa000;
            color: #fff;
        }

        .btn-archive:hover {
            background: #ff8f00;
        }

        .btn-reactivate {
            background: #2e7d32;
            color: #fff;
        }

        .btn-reactivate:hover {
            background: #256627;
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            overflow-y: auto;
        }
        
        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .modal-content {
            background: white;
            border-radius: 12px;
            width: 100%;
            max-width: 800px;
            max-height: 95vh;
            overflow-y: auto;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
            animation: modalFadeIn 0.3s;
        }
        
        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        .modal-header {
            padding: 20px 24px;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(135deg, #1a237e, #3949ab);
            color: white;
            border-radius: 12px 12px 0 0;
        }
        
        .modal-header h2 {
            margin: 0;
            font-size: 20px;
        }
        
        .modal-close {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 0;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background 0.2s;
        }
        
        .modal-close:hover {
            background: rgba(255,255,255,0.2);
        }
        
        .modal-body {
            padding: 24px;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }
        
        .form-group {
            margin-bottom: 16px;
        }
        
        .form-group.full-width {
            grid-column: 1 / -1;
        }
        
        .form-section {
            margin-top: 28px;
            padding-top: 20px;
            border-top: 1px solid rgba(26, 35, 126, 0.08);
            display: flex;
            gap: 24px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .form-section-content {
            flex: 1;
            min-width: 240px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .cores-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin-top: 16px;
        }
        
        .cor-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .cor-input-group {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        
        .cor-picker {
            width: 60px;
            height: 40px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            padding: 2px;
        }
        
        .cor-picker:hover {
            border-color: #1a237e;
        }
        
        .cor-text {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            text-transform: uppercase;
        }
        
        .cor-text:focus {
            outline: none;
            border-color: #1a237e;
            box-shadow: 0 0 0 3px rgba(26, 35, 126, 0.1);
        }
        
        .form-section-content h3 {
            margin: 0;
            font-size: 16px;
            font-weight: 700;
            color: #1a237e;
            letter-spacing: 0.03em;
        }
        
        .form-section-content p {
            margin: 0;
            font-size: 13px;
            color: #5f6368;
            line-height: 1.5;
        }
        
        .form-label {
            display: block;
            margin-bottom: 6px;
            font-weight: 600;
            color: #333;
            font-size: 14px;
        }
        
        .form-label.required::after {
            content: " *";
            color: #dc3545;
        }
        
        .form-input {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            font-size: 14px;
            transition: border-color 0.2s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #1a237e;
            box-shadow: 0 0 0 3px rgba(26, 35, 126, 0.1);
        }
        
        .form-input:disabled {
            background: #f8f9fa;
            cursor: not-allowed;
        }
        
        .logo-upload {
            display: flex;
            gap: 16px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .logo-preview {
            width: 110px;
            height: 110px;
            border-radius: 24px;
            background: rgba(26, 35, 126, 0.06);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
            color: #1a237e;
            font-weight: 600;
            text-transform: uppercase;
            box-shadow: inset 0 0 0 1px rgba(26, 35, 126, 0.08);
        }
        
        .logo-preview img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
        
        .logo-preview .logo-preview-empty {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
            font-size: 11px;
            color: #5f6368;
            text-align: center;
        }
        
        .logo-preview .logo-preview-empty i {
            font-size: 20px;
            color: #1a237e;
        }
        
        .logo-preview .logo-preview-initials {
            font-size: 18px;
            font-weight: 700;
            color: #1a237e;
        }
        
        .logo-actions {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .btn-logo-upload {
            position: relative;
            overflow: hidden;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: #1a237e;
            color: #fff;
            border-radius: 999px;
            padding: 8px 16px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 8px 16px rgba(26, 35, 126, 0.25);
        }
        
        .btn-logo-upload input[type="file"] {
            position: absolute;
            inset: 0;
            opacity: 0;
            cursor: pointer;
        }
        
        .btn-logo-remove {
            background: rgba(229, 57, 53, 0.12);
            color: #c62828;
            border: none;
            border-radius: 999px;
            padding: 8px 12px;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
        }
        
        .form-hint {
            display: block;
            font-size: 11px;
            color: #5f6368;
            margin-top: 4px;
        }
        
        .cnpj-search-btn {
            margin-top: 8px;
            padding: 8px 16px;
            background: #556B2F;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }
        
        .cnpj-search-btn:hover {
            background: #4a5d23;
        }
        
        .cnpj-search-btn:disabled {
            background: #9E9E9E;
            cursor: not-allowed;
        }
        
        .modal-footer {
            padding: 16px 24px;
            border-top: 1px solid #e0e0e0;
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        }
        
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #6c757d;
        }
        
        .empty-state i {
            font-size: 64px;
            margin-bottom: 16px;
            opacity: 0.5;
        }
        
        .loading-spinner {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid #1a237e;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="clientes-body">
    <main class="main-page no-sidebar">
        <header class="header clientes-header">
            <h1 class="header-title">Clientes</h1>
            <div class="header-actions"></div>
        </header>
        <div class="clientes-page">
            <section class="clientes-hero">
                <div class="clientes-hero-info">
                    <h1>AbsenteismoController</h1>
                    <p>Monitore o absenteísmo das empresas do GrupoBioMed em uma plataforma única, rápida e organizada.</p>
                </div>
                <button class="btn-hero" onclick="abrirModalNovo()">
                    <i class="fas fa-plus-circle"></i>
                    Adicionar Novo Cliente
                </button>
            </section>

            <section class="clientes-snapshot" id="clientesSnapshot">
                <div class="snapshot-card loading">
                    <i class="fas fa-spinner fa-spin"></i>
                    <div>Carregando indicadores...</div>
            </div>
            </section>

            <section class="clientes-filters" id="clientesFilters">
                <button class="filter-chip active" data-status="todos">
                    <i class="fas fa-layer-group"></i> Todos
                    </button>
                <button class="filter-chip" data-status="ativos">
                    <i class="fas fa-check-circle"></i> Ativos
                </button>
                <button class="filter-chip" data-status="arquivo">
                    <i class="fas fa-archive"></i> Arquivo Morto
                </button>
                <button class="filter-chip" data-status="sem-dados">
                    <i class="fas fa-database"></i> Sem Dados
                </button>
            </section>

            <section id="clientesCards" class="clientes-grid">
                <div class="clientes-empty">
                    <i class="fas fa-spinner fa-spin fa-2x" style="margin-bottom: 16px;"></i>
                            <p>Carregando clientes...</p>
                </div>
            </section>

            <section class="clientes-secondary">
                <div class="clientes-alerts" id="clientesAlertas">
                    <h3><i class="fas fa-bell"></i> Alertas recentes</h3>
                    <div class="clientes-empty-sm">
                            <i class="fas fa-spinner fa-spin"></i>
                        <p>Buscando alertas...</p>
                        </div>
                    </div>

                <div class="clientes-highlights" id="clientesHighlights">
                    <h3><i class="fas fa-star"></i> Novidades</h3>
                    <ul class="highlights-list">
                        <li>
                            <span class="highlight-title">Comparativos aprimorados</span>
                            <span class="highlight-desc">Relatórios agora oferecem variações mês a mês automaticamente.</span>
                        </li>
                        <li>
                            <span class="highlight-title">Exportação PowerPoint</span>
                            <span class="highlight-desc">Apresentações com insights e gráficos prontos para reunião.</span>
                        </li>
                        <li>
                            <span class="highlight-title">Arquivo morto inteligente</span>
                            <span class="highlight-desc">Clientes com histórico podem ser arquivados sem perder dados.</span>
                        </li>
                    </ul>
                </div>

                <div class="clientes-help">
                    <h3><i class="fas fa-life-ring"></i> Ajuda rápida</h3>
                    <ul>
                        <li><a href="#" onclick="alert('Em breve: tutorial interativo.'); return false;"><i class="fas fa-play-circle"></i> Como importar a planilha mensal</a></li>
                        <li><a href="#" onclick="alert('Em breve: guia de alertas.'); return false;"><i class="fas fa-exclamation-circle"></i> Entendendo os alertas automáticos</a></li>
                        <li><a href="#" onclick="alert('Em breve: fluxo de relatórios.'); return false;"><i class="fas fa-file-alt"></i> Gerar relatórios PowerPoint</a></li>
                        <li><a href="#" onclick="alert('Em breve: suporte.'); return false;"><i class="fas fa-headset"></i> Contatar suporte GrupoBioMed</a></li>
                    </ul>
            </div>
            </section>
    </div>
        </main>
    
    <!-- Modal de Mapeamento de Colunas -->
    <div id="modalMapeamento" class="modal">
        <div class="modal-content" style="max-width: 1200px; max-height: 90vh; overflow-y: auto;">
            <div class="modal-header">
                <h2 id="modalMapeamentoTitle">Configurar Mapeamento de Planilha</h2>
                <button class="modal-close" onclick="fecharModalMapeamento()">&times;</button>
            </div>
            <div class="modal-body">
                <div id="mapeamentoContent">
                    <!-- Passo 1: Upload de planilha de exemplo -->
                    <div id="mapeamentoPasso1" class="mapeamento-passo">
                        <div style="margin-bottom: 24px;">
                            <h3 style="margin-bottom: 8px;"><i class="fas fa-upload"></i> Passo 1: Envie uma planilha de exemplo</h3>
                            <p style="color: var(--text-secondary); font-size: 14px;">
                                Envie uma planilha da empresa para visualizarmos as colunas e configurar o mapeamento.
                            </p>
                        </div>
                        <div class="upload-zone-mapeamento" id="uploadZoneMapeamento" style="border: 2px dashed var(--border); border-radius: 12px; background: var(--surface-hover); transition: all 0.3s ease; cursor: pointer;" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="document.getElementById('planilhaExemplo').click()">
                            <input type="file" id="planilhaExemplo" accept=".xlsx,.xls" style="display: none;" onchange="processarPlanilhaExemplo(event)">
                            <div style="text-align: center; padding: 40px;">
                                <i class="fas fa-file-excel" style="font-size: 64px; color: #4CAF50; margin-bottom: 16px;"></i>
                                <p style="margin-bottom: 16px; font-size: 16px; font-weight: 600; color: var(--text-primary);">Arraste uma planilha aqui ou clique para selecionar</p>
                                <button type="button" class="btn btn-primary" onclick="event.stopPropagation(); document.getElementById('planilhaExemplo').click()">
                                    <i class="fas fa-folder-open"></i> Selecionar Planilha
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Passo 2: Mapeamento de colunas -->
                    <div id="mapeamentoPasso2" class="mapeamento-passo" style="display: none;">
                        <div style="margin-bottom: 24px;">
                            <h3 style="margin-bottom: 8px;"><i class="fas fa-table-columns"></i> Passo 2: Mapear colunas para campos do sistema</h3>
                            <p style="color: var(--text-secondary); font-size: 14px;">
                                Selecione qual campo do sistema corresponde a cada coluna da sua planilha.
                            </p>
                        </div>
                        <div id="mapeamentoColunas" style="display: flex; flex-direction: column; gap: 16px;">
                            <!-- Será preenchido dinamicamente -->
                        </div>
                    </div>
                    
                    <!-- Passo 3: Preview -->
                    <div id="mapeamentoPasso3" class="mapeamento-passo" style="display: none;">
                        <div style="margin-bottom: 24px;">
                            <h3 style="margin-bottom: 8px;"><i class="fas fa-eye"></i> Passo 3: Preview do mapeamento</h3>
                            <p style="color: var(--text-secondary); font-size: 14px;">
                                Visualize como os dados serão processados com o mapeamento configurado.
                            </p>
                        </div>
                        <div id="previewMapeamento" style="background: var(--surface-hover); border-radius: 8px; padding: 20px;">
                            <!-- Será preenchido dinamicamente -->
                        </div>
                    </div>
                    
                </div>
                
                <div class="modal-footer" style="margin-top: 32px; display: flex; justify-content: space-between; align-items: center;">
                    <button type="button" class="btn btn-secondary" onclick="fecharModalMapeamento()">Cancelar</button>
                    <div style="display: flex; gap: 12px;">
                        <button type="button" class="btn btn-secondary" id="btnVoltarMapeamento" onclick="voltarPassoMapeamento()" style="display: none;">
                            <i class="fas fa-arrow-left"></i> Voltar
                        </button>
                        <button type="button" class="btn btn-primary" id="btnAvancarMapeamento" onclick="avancarPassoMapeamento()" style="display: none;">
                            Avançar <i class="fas fa-arrow-right"></i>
                        </button>
                        <button type="button" class="btn btn-success" id="btnSalvarMapeamento" onclick="salvarMapeamento()" style="display: none;">
                            <i class="fas fa-save"></i> Salvar Mapeamento
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Cliente -->
    <div id="modalCliente" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Novo Cliente</h2>
                <button class="modal-close" onclick="fecharModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="formCliente" onsubmit="salvarCliente(event)">
                    <input type="hidden" id="clienteId" value="">
                    
                    <div class="form-group full-width">
                        <label class="form-label required" for="cnpj">CNPJ</label>
                        <div style="display: flex; gap: 8px;">
                            <input 
                                type="text" 
                                id="cnpj" 
                                class="form-input" 
                                placeholder="00.000.000/0000-00"
                                maxlength="18"
                                oninput="formatarCNPJ(this)"
                                required
                            >
                            <button 
                                type="button" 
                                class="cnpj-search-btn" 
                                id="btnBuscarCNPJ"
                                onclick="buscarCNPJ()"
                            >
                                <i class="fas fa-search"></i>
                                Buscar
                            </button>
                        </div>
                    </div>
                    
                    <div class="form-grid">
                        <div class="form-group full-width">
                            <label class="form-label required" for="nome">Razão Social</label>
                            <input type="text" id="nome" class="form-input" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="nome_fantasia">Nome Fantasia</label>
                            <input type="text" id="nome_fantasia" class="form-input">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="situacao">Situação</label>
                            <input type="text" id="situacao" class="form-input" disabled>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="data_abertura">Data de Abertura</label>
                            <input type="date" id="data_abertura" class="form-input">
                        </div>
                        
                        <div class="form-group full-width">
                            <label class="form-label" for="atividade_principal">Atividade Principal</label>
                            <input type="text" id="atividade_principal" class="form-input">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="inscricao_estadual">Inscrição Estadual</label>
                            <input type="text" id="inscricao_estadual" class="form-input">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="inscricao_municipal">Inscrição Municipal</label>
                            <input type="text" id="inscricao_municipal" class="form-input">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="cep">CEP</label>
                            <input type="text" id="cep" class="form-input" placeholder="00000-000" maxlength="9" oninput="formatarCEP(this)">
                        </div>
                        
                        <div class="form-group full-width">
                            <label class="form-label" for="endereco">Endereço</label>
                            <input type="text" id="endereco" class="form-input">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="numero">Número</label>
                            <input type="text" id="numero" class="form-input">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="complemento">Complemento</label>
                            <input type="text" id="complemento" class="form-input">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="bairro">Bairro</label>
                            <input type="text" id="bairro" class="form-input">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="cidade">Cidade</label>
                            <input type="text" id="cidade" class="form-input">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="estado">Estado</label>
                            <input type="text" id="estado" class="form-input" maxlength="2" style="text-transform: uppercase;">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="telefone">Telefone</label>
                            <input type="text" id="telefone" class="form-input" placeholder="(00) 0000-0000" oninput="formatarTelefone(this)">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="email">E-mail</label>
                            <input type="email" id="email" class="form-input">
                        </div>
                    </div>

                    <div class="form-section">
                        <div class="form-section-content">
                            <h3>Identidade visual</h3>
                            <p>Gerencie múltiplos logos para personalizar cards, relatórios e a experiência do cliente.</p>
                            
                            <!-- Lista de logos existentes -->
                            <div id="logosLista" style="margin-bottom: 16px; max-height: 300px; overflow-y: auto; border: 1px solid #ddd; border-radius: 8px; padding: 12px; background: #f9f9f9;">
                                <div style="text-align: center; color: #999; padding: 20px;">
                                    <i class="fas fa-spinner fa-spin"></i> Carregando logos...
                                </div>
                            </div>
                            
                            <!-- Adicionar novo logo -->
                            <div style="border-top: 1px solid #ddd; padding-top: 16px; margin-top: 16px;">
                                <label class="form-label" style="font-size: 14px; margin-bottom: 8px;">Adicionar Novo Logo</label>
                                <div class="logo-preview" id="logoPreview">
                                    <div class="logo-preview-empty">
                                        <i class="fas fa-image"></i>
                                        <span>Sem logo</span>
                                    </div>
                                </div>
                                <div class="logo-actions">
                                    <label class="btn-logo-upload">
                                        <i class="fas fa-plus"></i>
                                        Adicionar Novo Logo
                                        <input type="file" id="logoArquivo" accept="image/png,image/jpeg,image/jpg,image/svg+xml,image/webp">
                                    </label>
                                    <button type="button" class="btn-logo-remove" onclick="removerLogoSelecionado()">
                                        <i class="fas fa-times"></i> Limpar Seleção
                                    </button>
                                </div>
                                <div class="form-group" style="margin-top: 12px;">
                                    <label class="form-label" style="font-size: 13px;">Descrição (opcional)</label>
                                    <input type="text" id="logoDescricao" class="form-input" placeholder="Ex: Logo principal, Logo horizontal, etc." style="font-size: 13px;">
                                </div>
                                <div class="form-group" style="margin-top: 8px;">
                                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; font-size: 13px;">
                                        <input type="checkbox" id="logoPrincipal" style="width: auto;">
                                        <span>Definir como logo principal</span>
                                    </label>
                                </div>
                            </div>
                            
                            <span class="form-hint">Formatos PNG, JPG, SVG ou WEBP com até 1 MB. Use imagens com fundo transparente sempre que possível.</span>
                            <input type="hidden" id="logoUrl" value="">
                        </div>
                    </div>

                    <div class="form-section" id="secaoCores" style="border-top: 2px solid #1a237e; padding-top: 24px;">
                        <div class="form-section-content">
                            <h3 style="color: #1a237e; font-size: 18px; margin-bottom: 8px;">
                                <i class="fas fa-palette" style="margin-right: 8px;"></i>Paleta de Cores
                            </h3>
                            <p style="margin-bottom: 16px;">Configure as cores da empresa para personalizar gráficos e visualizações.</p>
                            
                            <div class="cores-grid">
                                <div class="cor-group">
                                    <label class="form-label">Cor Primária</label>
                                    <div class="cor-input-group">
                                        <input type="color" id="corPrimary" value="#1a237e" class="cor-picker">
                                        <input type="text" id="corPrimaryText" value="#1a237e" class="cor-text" maxlength="7">
                                    </div>
                                </div>
                                
                                <div class="cor-group">
                                    <label class="form-label">Cor Primária Escura</label>
                                    <div class="cor-input-group">
                                        <input type="color" id="corPrimaryDark" value="#0d47a1" class="cor-picker">
                                        <input type="text" id="corPrimaryDarkText" value="#0d47a1" class="cor-text" maxlength="7">
                                    </div>
                                </div>
                                
                                <div class="cor-group">
                                    <label class="form-label">Cor Primária Clara</label>
                                    <div class="cor-input-group">
                                        <input type="color" id="corPrimaryLight" value="#3949ab" class="cor-picker">
                                        <input type="text" id="corPrimaryLightText" value="#3949ab" class="cor-text" maxlength="7">
                                    </div>
                                </div>
                                
                                <div class="cor-group">
                                    <label class="form-label">Cor Secundária</label>
                                    <div class="cor-input-group">
                                        <input type="color" id="corSecondary" value="#556B2F" class="cor-picker">
                                        <input type="text" id="corSecondaryText" value="#556B2F" class="cor-text" maxlength="7">
                                    </div>
                                </div>
                                
                                <div class="cor-group">
                                    <label class="form-label">Cor Secundária Escura</label>
                                    <div class="cor-input-group">
                                        <input type="color" id="corSecondaryDark" value="#4a5d23" class="cor-picker">
                                        <input type="text" id="corSecondaryDarkText" value="#4a5d23" class="cor-text" maxlength="7">
                                    </div>
                                </div>
                                
                                <div class="cor-group">
                                    <label class="form-label">Cor Secundária Clara</label>
                                    <div class="cor-input-group">
                                        <input type="color" id="corSecondaryLight" value="#6B8E23" class="cor-picker">
                                        <input type="text" id="corSecondaryLightText" value="#6B8E23" class="cor-text" maxlength="7">
                                    </div>
                                </div>
                            </div>
                            
                            <div style="margin-top: 16px;">
                                <button type="button" class="btn btn-secondary" onclick="aplicarCoresPadrao()" style="font-size: 12px;">
                                    <i class="fas fa-undo"></i> Restaurar Padrão
                                </button>
                                <button type="button" class="btn btn-primary" onclick="salvarCoresCliente()" style="font-size: 12px; margin-left: 8px;">
                                    <i class="fas fa-save"></i> Salvar Cores
                                </button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="fecharModal()">Cancelar</button>
                <button type="submit" form="formCliente" class="btn btn-primary">
                    <i class="fas fa-save"></i>
                    Salvar
                </button>
            </div>
        </div>
    </div>
    
    <script src="/static/js/auth.js"></script>
    <script src="/static/js/clientes.js"></script>
    <script src="/static/js/mapeamento_colunas.js"></script>
</body>
</html>

